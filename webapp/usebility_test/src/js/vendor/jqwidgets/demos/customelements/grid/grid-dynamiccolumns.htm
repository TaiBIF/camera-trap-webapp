<!DOCTYPE html>
<html lang="en">
<head>
    <title id='Description'>Grid Custom Element DynamicColumns</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1 maximum-scale=1 minimum-scale=1" />
    <meta name="description" content="This is an example of Custom Element Grid with dynamic columns." />

    <link rel="stylesheet" href="../jqwidgets/styles/jqx.base.css" type="text/css" />
    <link rel="stylesheet" href="../styles/demos.css" type="text/css" />

    <script type="text/javascript" src="../scripts/webcomponents-lite.min.js"></script>
    <script type="text/javascript" src="../jqwidgets/jqxcore.js"></script>
    <script type="text/javascript" src="../jqwidgets/jqxcore.elements.js"></script>
    <script type="text/javascript" src="../jqwidgets/jqxbuttons.js"></script>
    <script type="text/javascript" src="../jqwidgets/jqxscrollbar.js"></script>
    <script type="text/javascript" src="../jqwidgets/jqxmenu.js"></script>
    <script type="text/javascript" src="../jqwidgets/jqxgrid.js"></script>
    <script type="text/javascript" src="../jqwidgets/jqxgrid.selection.js"></script>
    <script type="text/javascript" src="../jqwidgets/jqxgrid.columnsresize.js"></script>
    <script type="text/javascript" src="../jqwidgets/jqxdata.js"></script>
    <script type="text/javascript" src="../scripts/demos.js"></script>
    <script type="text/javascript">
        window.onload = function() {
            var myGrid = document.createElement('jqx-grid');

            var source =
                {
                    datatype: 'json',
                    url: '../sampledata/rows_and_columns.txt'
                };

            var dataAdapter = new jqx.dataAdapter(source, {
                autoBind: true,
                downloadComplete: function(data) {
                    var columns = data[0].columns;
                    var rows = data[1].rows;

                    var gridAdapter = {
                        datafields: [
                            { name: 'id', type: 'number' },
                            { name: 'name', type: 'string' },
                            { name: 'type', type: 'string' },
                            { name: 'calories', type: 'int' },
                            { name: 'totalfat', type: 'string' },
                            { name: 'protein', type: 'string' }
                        ],
                        id: 'id',
                        localdata: rows
                    };

                    myGrid.hideloadelement();
                    myGrid.beginupdate(true);

                    myGrid.source = gridAdapter;
                    myGrid.columns = columns;
                    
                    myGrid.endupdate();
                }
            });

            myGrid.settings =
                {
                   columnsresize: true
                };
            document.body.appendChild(myGrid);
            myGrid.showloadelement();
        };
    </script>
</head>
<body>
    <div class="example-description">
        The Custom element Grid's columns and rows in this examples are retrieved from JSON file.
    </div>
</body>
</html>
